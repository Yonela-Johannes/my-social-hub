import{h as ee,c as te,g as ae,b as ne}from"./@babel.3a8c2b99.js";import{a as re,F as oe,j as ie,T as le}from"./@rc-component.1251c77a.js";import{c as S}from"./classnames.894b94fb.js";import{j as se,K as j,k as L,s as W}from"./rc-util.48716302.js";import{r as b,a as o}from"./react.6bac1629.js";var fe=j.ESC,ue=j.TAB;function ce(e){var u=e.visible,r=e.triggerRef,s=e.onVisibleChange,c=e.autoFocus,a=e.overlayRef,n=b.exports.useRef(!1),f=function(){if(u){var t,i;(t=r.current)===null||t===void 0||(i=t.focus)===null||i===void 0||i.call(t),s==null||s(!1)}},p=function(){var t;return(t=a.current)!==null&&t!==void 0&&t.focus?(a.current.focus(),n.current=!0,!0):!1},h=function(t){switch(t.keyCode){case fe:f();break;case ue:{var i=!1;n.current||(i=p()),i?t.preventDefault():f();break}}};b.exports.useEffect(function(){return u?(window.addEventListener("keydown",h),c&&se(p,3),function(){window.removeEventListener("keydown",h),n.current=!1}):function(){n.current=!1}},[u])}var ve=b.exports.forwardRef(function(e,u){var r=e.overlay,s=e.arrow,c=e.prefixCls,a=b.exports.useMemo(function(){var f;return typeof r=="function"?f=r():f=r,f},[r]),n=L(u,a==null?void 0:a.ref);return re(oe,{children:[s&&ie("div",{className:"".concat(c,"-arrow")}),o.cloneElement(a,{ref:W(a)?n:void 0})]})}),v={adjustX:1,adjustY:1},d=[0,0],de={topLeft:{points:["bl","tl"],overflow:v,offset:[0,-4],targetOffset:d},top:{points:["bc","tc"],overflow:v,offset:[0,-4],targetOffset:d},topRight:{points:["br","tr"],overflow:v,offset:[0,-4],targetOffset:d},bottomLeft:{points:["tl","bl"],overflow:v,offset:[0,4],targetOffset:d},bottom:{points:["tc","bc"],overflow:v,offset:[0,4],targetOffset:d},bottomRight:{points:["tr","br"],overflow:v,offset:[0,4],targetOffset:d}},me=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function ge(e,u){var r,s=e.arrow,c=s===void 0?!1:s,a=e.prefixCls,n=a===void 0?"rc-dropdown":a,f=e.transitionName,p=e.animation,h=e.align,m=e.placement,t=m===void 0?"bottomLeft":m,i=e.placements,D=i===void 0?de:i,_=e.getPopupContainer,K=e.showAction,$=e.hideAction,B=e.overlayClassName,H=e.overlayStyle,I=e.visible,x=e.trigger,A=x===void 0?["hover"]:x,X=e.autoFocus,M=e.overlay,y=e.children,w=e.onVisibleChange,Y=ee(e,me),q=o.useState(),N=te(q,2),z=N[0],E=N[1],R="visible"in e?I:z,P=o.useRef(null),k=o.useRef(null),T=o.useRef(null);o.useImperativeHandle(u,function(){return P.current});var V=function(l){E(l),w==null||w(l)};ce({visible:R,triggerRef:T,onVisibleChange:V,autoFocus:X,overlayRef:k});var G=function(l){var C=e.onOverlayClick;E(!1),C&&C(l)},F=function(){return o.createElement(ve,{ref:k,overlay:M,prefixCls:n,arrow:c})},J=function(){return typeof M=="function"?F:F()},Q=function(){var l=e.minOverlayWidthMatchTrigger,C=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?l:!C},U=function(){var l=e.openClassName;return l!==void 0?l:"".concat(n,"-open")},Z=o.cloneElement(y,{className:S((r=y.props)===null||r===void 0?void 0:r.className,R&&U()),ref:W(y)?L(T,y.ref):void 0}),O=$;return!O&&A.indexOf("contextMenu")!==-1&&(O=["click"]),o.createElement(le,ae({builtinPlacements:D},Y,{prefixCls:n,ref:P,popupClassName:S(B,ne({},"".concat(n,"-show-arrow"),c)),popupStyle:H,action:A,showAction:K,hideAction:O,popupPlacement:t,popupAlign:h,popupTransitionName:f,popupAnimation:p,popupVisible:R,stretch:Q()?"minWidth":"",popup:J(),onPopupVisibleChange:V,onPopupClick:G,getPopupContainer:_}),Z)}var we=o.forwardRef(ge);export{we as D};
