import{r as t}from"./react.6bac1629.js";import{j as R}from"./@rc-component.1251c77a.js";function V(o={}){const{nonce:n,onScriptLoadSuccess:r,onScriptLoadError:c}=o,[v,u]=t.exports.useState(!1),d=t.exports.useRef(r);d.current=r;const a=t.exports.useRef(c);return a.current=c,t.exports.useEffect(()=>{const i=document.createElement("script");return i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.nonce=n,i.onload=()=>{var e;u(!0),(e=d.current)===null||e===void 0||e.call(d)},i.onerror=()=>{var e;u(!1),(e=a.current)===null||e===void 0||e.call(a)},document.body.appendChild(i),()=>{document.body.removeChild(i)}},[n]),v}const M=t.exports.createContext(null);function N({clientId:o,nonce:n,onScriptLoadSuccess:r,onScriptLoadError:c,children:v}){const u=V({nonce:n,onScriptLoadSuccess:r,onScriptLoadError:c}),d=t.exports.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:u}),[o,u]);return R(M.Provider,{value:d,children:v})}function q(){const o=t.exports.useContext(M);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function D(o){var n;return(n=o==null?void 0:o.clientId)!==null&&n!==void 0?n:o==null?void 0:o.client_id}const F={large:40,medium:32,small:20};function P({onSuccess:o,onError:n,useOneTap:r,promptMomentNotification:c,type:v="standard",theme:u="outline",size:d="large",text:a,shape:i,logo_alignment:e,width:G,locale:C,click_listener:k,containerProps:w,...B}){const E=t.exports.useRef(null),{clientId:A,scriptLoadedSuccessfully:I}=q(),j=t.exports.useRef(o);j.current=o;const g=t.exports.useRef(n);g.current=n;const O=t.exports.useRef(c);return O.current=c,t.exports.useEffect(()=>{var x,_,p,m,S,h,L,y,b;if(!!I)return(p=(_=(x=window==null?void 0:window.google)===null||x===void 0?void 0:x.accounts)===null||_===void 0?void 0:_.id)===null||p===void 0||p.initialize({client_id:A,callback:l=>{var s;if(!(l!=null&&l.credential))return(s=g.current)===null||s===void 0?void 0:s.call(g);const{credential:f,select_by:H}=l;j.current({credential:f,clientId:D(l),select_by:H})},...B}),(h=(S=(m=window==null?void 0:window.google)===null||m===void 0?void 0:m.accounts)===null||S===void 0?void 0:S.id)===null||h===void 0||h.renderButton(E.current,{type:v,theme:u,size:d,text:a,shape:i,logo_alignment:e,width:G,locale:C,click_listener:k}),r&&((b=(y=(L=window==null?void 0:window.google)===null||L===void 0?void 0:L.accounts)===null||y===void 0?void 0:y.id)===null||b===void 0||b.prompt(O.current)),()=>{var l,s,f;r&&((f=(s=(l=window==null?void 0:window.google)===null||l===void 0?void 0:l.accounts)===null||s===void 0?void 0:s.id)===null||f===void 0||f.cancel())}},[A,I,r,v,u,d,a,i,e,G,C]),R("div",{...w,ref:E,style:{height:F[d],...w==null?void 0:w.style}})}export{N as G,P as a};
