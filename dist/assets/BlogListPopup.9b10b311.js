import{r as d}from"./react.6bac1629.js";import{I as w,_ as l}from"./react-hot-toast.9c82a8f7.js";import{D as y}from"./react-dropzone.3c4c4f90.js";import{a as N}from"./axios.58752079.js";import{u as j,a as D}from"./react-redux.49c0f1c3.js";import{l as S}from"./react-quill.3b3efc55.js";import{t as h}from"./react-icons.4e2f3ad6.js";import{D as C}from"./index.0d18c3ee.js";import{F as I}from"./react-loader-spinner.370fdd40.js";import{a as o,F as k,j as e}from"./@rc-component.1251c77a.js";import{a as B}from"./react-router.ddd05982.js";import"./goober.2053c3e8.js";import"./prop-types.d8c62f81.js";import"./file-selector.46695f03.js";import"./tslib.3ddc700f.js";import"./attr-accept.d4f66889.js";import"./react-dom.743d3922.js";import"./scheduler.3d82e58a.js";import"./hoist-non-react-statics.798fddd9.js";import"./react-is.484b48b3.js";import"./use-sync-external-store.b020237b.js";import"./lodash.9a7ef327.js";import"./quill.9356b2b5.js";import"./react-router-dom.4fd390f9.js";import"./@remix-run.0f90e68c.js";import"./@reduxjs.ad644bad.js";import"./immer.a5abe755.js";import"./redux.25e2e7b8.js";import"./@babel.3a8c2b99.js";import"./redux-thunk.c6126e9b.js";import"./moment.4889ea25.js";import"./html-react-parser.161f3490.js";import"./react-property.eaac8e83.js";import"./domelementtype.4be9d55f.js";import"./html-dom-parser.b90dc621.js";import"./style-to-js.d7109a81.js";import"./style-to-object.0e87b645.js";import"./inline-style-parser.6dc90e75.js";import"./@react-oauth.9cfe8954.js";import"./redux-persist.f9308c0e.js";import"./rc-util.48716302.js";import"./classnames.894b94fb.js";import"./rc-resize-observer.5e4ec66b.js";import"./resize-observer-polyfill.8deb1e21.js";import"./rc-motion.a469ddb1.js";import"./styled-components.636ce670.js";import"./@emotion.21aae260.js";import"./styled-tools.6bc36e93.js";var F=[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]];const L={toolbar:F},_=()=>{const[p,g]=d.exports.useState(null),x=B(),{_id:u}=j(r=>r.auth),f=D(),[b,m]=d.exports.useState(!1),[t,n]=d.exports.useState({errors:"",userId:"",title:"",message:"",image:null}),v=async r=>{if(r.preventDefault(),!t.title)return l("Blog title is required");if(t.title.length<4)return l("Title should have a minimum of 4 characters");if(!u)return l("Something went wrong: user details missing!");if(!t.message)return l("Blog post is required");if(!t.image)return l("Image is required");m(!0),console.log(t.image);const i=new FormData;t!=null&&t.image?(i.append("file",t==null?void 0:t.image),i.append("upload_preset","nomiupload"),await N.post("https://api.cloudinary.com/v1_1/globalnomi/image/upload",i).then(a=>f(C({...t,userId:u,image:a==null?void 0:a.data.url}))).catch(a=>{console.log(a),l("Error creating blog post"),m(!1)})):(l("Something went wrong!"),m(!1)),m(!1),g(null),n({}),x("/blogs")};return o(k,{children:[e(w,{}),b?e(I,{color:"#5A2E98",width:"100",visible:!0,ariaLabel:"falling-lines-loading"}):e("div",{className:"bg-white text-black my-20 w-[300px] md:w-full",children:o("div",{children:[e("input",{id:"title",label:"Blog title",name:"title",className:"bg-white mb-4",InputLabelProps:{shrink:!0},placeholder:"Blog title",value:t.title,onChange:r=>n({...t,title:r.target.value})}),e("div",{className:"text-[16px]",children:e(S,{theme:"snow",className:"mb-3 text-[16px]",placeholder:"Write the post content...",modules:L,value:t.message,onChange:r=>n({...t,message:r})})}),e("div",{className:"p-2",children:e(y,{acceptedFiles:".jpg,.jpeg,.png",multiple:!1,onDrop:r=>r.map((i,a)=>{const{type:s}=i;if(s==="image/png"||s==="image/svg"||s==="image/jpeg"||s==="image/gif"||s==="image/webp"){n({...t,image:i}),console.log(typeof t.image);const c=new FileReader;c.readAsDataURL(i),c.onloadend=()=>{g(c.result)}}}),children:({getRootProps:r,getInputProps:i,isDragActive:a})=>o("div",{...r(),className:"p-[1rem]",children:[e("input",{name:"banner",...i()}),a?o("div",{className:"flex flex-col text-center items-center justify-center",children:[o("p",{className:"text-center text-[13px] text-primary",children:[e(h,{size:22})," "]}),e("p",{className:"text-center text-[13px]",children:" Drop here!"})]}):p===null?o("div",{className:"flex flex-col text-center items-center justify-center",children:[e("p",{className:"text-center text-[13px] text-primary",children:e(h,{size:22})}),e("p",{className:"text-center text-[13px]",children:"Drag and Drop here or click to choose"})]}):e("div",{className:"flex items-center justify-center",children:e("div",{children:e("img",{className:"h-[200px] w-[200px] object-cover rounded-md",src:p,alt:""})})})]})})}),e("button",{onClick:v,children:"Create post"})]})})]})},Ie=({close:p})=>o("div",{className:"flex flex-col m-auto my-2 md:my-10 items-center justify-center bg-bg_alt pt-10 pb-4 w-[320px] md:w-[1000px] self-center rounded-lg md:px-10 md:p-20",children:[o("div",{className:"flex flex-col items-center w-[300px] md:w-full",children:[e("p",{className:"text-center font-bold text-3xl pb-4",children:"Customize your new blog"}),o("p",{className:"text-center text-lighter   text-md",children:["Customize your blog's unique personality and message.",e("br",{})," And remember, you can always update it as your blog evolves"]})]}),e("div",{children:e(_,{})})]});export{Ie as default};
