import{r as x}from"./react.6bac1629.js";import{L as w}from"./Layout.7dd9d4ef.js";import{a as g,u as h}from"./react-redux.3f289702.js";import{k as y,l as j,m as _,b as C,D as k}from"./react-icons.5432a36c.js";import{F as I}from"./Footer.62be5563.js";import{j as P,k as A,l as $,m as S,n as z,o as E}from"./index.05c2ef0f.js";import{h as L}from"./html-react-parser.f4257340.js";import{I as D,_ as F}from"./react-hot-toast.9c82a8f7.js";import{h as H}from"./moment.851b41e1.js";import"./axios.58752079.js";import{j as r,a as i}from"./@rc-component.577e8b52.js";import{a as O,b as U}from"./react-router.48f4d0ba.js";import"./react-dom.743d3922.js";import"./scheduler.3d82e58a.js";import"./hoist-non-react-statics.798fddd9.js";import"./react-is.484b48b3.js";import"./use-sync-external-store.b020237b.js";import"./react-router-dom.112421e8.js";import"./@remix-run.0f90e68c.js";import"./@reduxjs.ad644bad.js";import"./immer.a5abe755.js";import"./redux.25e2e7b8.js";import"./@babel.3a8c2b99.js";import"./redux-thunk.c6126e9b.js";import"./react-loader-spinner.370fdd40.js";import"./styled-components.636ce670.js";import"./@emotion.21aae260.js";import"./styled-tools.6bc36e93.js";import"./react-dropzone.5b3a91bf.js";import"./prop-types.d8c62f81.js";import"./file-selector.46695f03.js";import"./tslib.3ddc700f.js";import"./attr-accept.94211af6.js";import"./@react-oauth.10fc6879.js";import"./redux-persist.f9308c0e.js";import"./rc-util.48716302.js";import"./classnames.894b94fb.js";import"./rc-resize-observer.5e4ec66b.js";import"./resize-observer-polyfill.8deb1e21.js";import"./rc-motion.a469ddb1.js";import"./goober.2053c3e8.js";import"./react-property.eaac8e83.js";import"./domelementtype.4be9d55f.js";import"./html-dom-parser.f4715b63.js";import"./style-to-js.c8bbc4eb.js";import"./style-to-object.0e87b645.js";import"./inline-style-parser.6dc90e75.js";function T({postId:e,userId:c,data:s}){var l;return x.exports.useState(!1),x.exports.useState(""),g(),r("div",{className:"flex flex-col gap-6 my-4 mx-4",children:(l=s==null?void 0:s.slice(0,1))==null?void 0:l.map(t=>{var n,m,d;return i("div",{className:"flex flex-col",children:[i("div",{className:"flex gap-2 items-center justify-start",children:[((n=t==null?void 0:t.user)==null?void 0:n.picture)&&r("img",{src:(m=t==null?void 0:t.user)==null?void 0:m.picture,alt:"avatar",className:"w-8 h-8 object-cover object-center rounded-full"}),r("span",{className:"mr-1 font-bold",children:(d=t==null?void 0:t.user)==null?void 0:d.given_name})]}),r("div",{className:"flex justify-between text-[14px] items-center",children:r("span",{children:t==null?void 0:t.comment})})]},`${t==null?void 0:t._id}-${t.user.given_name}`)})})}const Y=({post:e})=>{var f,a,v,p,b;const[c,s]=x.exports.useState([]),{_id:l}=h(o=>o.auth),t=g(),n=e==null?void 0:e._id,m=()=>{t(A(n)),t($(n))};x.exports.useEffect(()=>{(async()=>{try{const u=await fetch(`${S}post-comment/all-comments/${n}`);if(u.ok){const N=await u.json();s(N)}else console.error(`Error: ${u.status}`)}catch(u){console.error(u)}})()},[]),x.exports.useEffect(()=>{t(P(c==null?void 0:c.length))},[c]);const d=async()=>{if(!l)return F("Sorry you have to sign in to like post");t(z({postId:e==null?void 0:e._id,userId:l}))};return i("div",{className:"group flex flex-col my-4 rounded-xl bg-bg_alt ",children:[r(D,{}),i("div",{className:"",children:[i("div",{className:"flex items-center mt-2 ml-2",children:[r("p",{className:"text-[12px] flex flex-col justify-start px-2 py-1 text-lighter rounded-md bg-bg_alt items-start text-start gap-0",children:"@posted by"}),i("div",{className:"flex items-center text-base text-lighter p-1 rounded-b-md left-2 gap-2",children:[r("img",{src:(f=e==null?void 0:e.user)==null?void 0:f.picture,className:"w-[50px] h-[50px] object-cover rounded-full",alt:"logo"}),r("div",{className:"flex flex-col justify-start px-2 py-1 rounded-md bg-bg_alt items-start text-start gap-0",children:i("p",{className:"m-0 p-0 text-[14px] text-facebook",children:[(a=e==null?void 0:e.user)==null?void 0:a.given_name," ",(v=e==null?void 0:e.user)==null?void 0:v.family_name]})})]})]}),i("div",{className:"flex text-start pb-4 justify-between p-2 px-4 text-base",children:[r("p",{className:"text-[16px]",children:e==null?void 0:e.title}),r("p",{className:"text-[12px] text-lighter",children:H(e==null?void 0:e.createdAt).fromNow()})]})]}),r("div",{onClick:m,className:"relative flex flex-col items-center text-center w-[280px] md:w-[700px] rounded-xl cursor-pointer duration-300",children:i("div",{className:"w-full",children:[(e==null?void 0:e.image)&&r("img",{src:e==null?void 0:e.image,alt:e==null?void 0:e.name,className:"h-[200px] w-[280px] md:w-full md:h-[400px] object-cover object-center transition-all ease self-center"}),i("div",{className:"",children:[(e==null?void 0:e.post)&&r("div",{className:"flex text-start pb--4 justify-between p-2 px-4 text-base border-b border-b-primary",children:r("p",{className:"text-[16px]",children:L(`${e==null?void 0:e.post.slice(0,200)}`)})}),r(T,{postId:e==null?void 0:e._id,userId:l,data:c})]})]})}),r("div",{className:"flex flex-col md:flex-row items-center ml-2 pb-3 justify-between gap-4",children:r("div",{className:"flex items-center text-base text-white p-1 rounded-b-md left-2 gap-2",children:i("div",{className:"flex gap-4",children:[i("div",{onClick:d,className:`${(p=e==null?void 0:e.lovedUsers)!=null&&p.find(o=>o._id===l)?"text-red":""} flex text-[12px] gap-2 items-center hover:text-red duration-300 cursor-pointer`,children:[e==null?void 0:e.loveCount,(b=e==null?void 0:e.lovedUsers)!=null&&b.find(o=>o._id===l)?r("div",{className:"cursor-pointer border border-red rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(y,{size:18})}):r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(j,{size:18})})]}),i("div",{className:"flex text-[12px] gap-2 items-center",children:[e==null?void 0:e.viewCount,r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(_,{size:18})})]}),i("div",{className:"flex text-[12px] gap-2 items-center",children:[e==null?void 0:e.commentCount,r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(C,{size:18})})]})]})})})]})},De=()=>{const{given_name:e,family_name:c,email:s,isAdmin:l}=h(a=>a.auth),{posts:t}=h(a=>a.posts),n=O(),m=g(),d=U(),{pathname:f}=d;return x.exports.useEffect(()=>{m(E())},[f]),i(w,{children:[s&&l&&i("div",{className:"flex flex-col sm:flex-row items-center justify-between md:w-[1000px] my-8 pr-8",children:[r("h3",{className:"text-center font-bold text-3xl pb-4",children:"Posts"}),i("div",{className:"flex items-center px-2 w-full justify-around",children:[i("p",{className:"text-center text-lighter text-md",children:[e," ",c,", Bring Your Ideas to Life - Write Your Next Post Today!"]}),r("div",{onClick:()=>n("/create-post"),className:"bg-bg_light p-2 rounded-xl h-min w-min cursor-pointer",children:r(k,{size:20})})]})]}),r("div",{className:"flex flex-col flex-wrap text-center justify-center items-center gap-10 w-full mt-5",children:(t==null?void 0:t.length)>0?t==null?void 0:t.map(a=>r(Y,{post:a},a._id)):r("p",{className:"text-base w-full",children:"No Posts..."})}),r("div",{className:"mb-12 md:mb-20",children:r(I,{})})]})};export{De as default};
