import{r as l}from"./react.6bac1629.js";import{R as b,u as C,a as E,b as x,c as L,d as k,e as O,D as K,f as P}from"./react-router.ddd05982.js";import{c as D,b as v,i as R}from"./@remix-run.0f90e68c.js";/**
 * React Router DOM v6.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},y.apply(this,arguments)}function H(e,t){if(e==null)return{};var r={},o=Object.keys(e),s,n;for(n=0;n<o.length;n++)s=o[n],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function T(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j(e,t){return e.button===0&&(!t||t==="_self")&&!T(e)}const I=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function M(e){let{basename:t,children:r,window:o}=e,s=l.exports.useRef();s.current==null&&(s.current=D({window:o,v5Compat:!0}));let n=s.current,[i,u]=l.exports.useState({action:n.action,location:n.location});return l.exports.useLayoutEffect(()=>n.listen(u),[n]),l.exports.createElement(b,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:n})}const W=l.exports.forwardRef(function(t,r){let{onClick:o,relative:s,reloadDocument:n,replace:i,state:u,target:f,to:c,preventScrollReset:d}=t,a=H(t,I),m=C(c,{relative:s}),w=N(c,{replace:i,state:u,target:f,preventScrollReset:d,relative:s});function S(h){o&&o(h),h.defaultPrevented||w(h)}return l.exports.createElement("a",y({},a,{href:m,onClick:n?o:S,ref:r,target:f}))});function G(e){let{getKey:t,storageKey:r}=e;return _({getKey:t,storageKey:r}),null}function N(e,t){let{target:r,replace:o,state:s,preventScrollReset:n,relative:i}=t===void 0?{}:t,u=E(),f=x(),c=L(e,{relative:i});return l.exports.useCallback(d=>{if(j(d,r)){d.preventDefault();let a=o!==void 0?o:v(f)===v(c);u(e,{replace:a,state:s,preventScrollReset:n,relative:i})}},[f,u,c,o,s,r,e,n,i])}const g="react-router-scroll-positions";let p={};function _(e){let{getKey:t,storageKey:r}=e===void 0?{}:e,o=x(),s=k(),n=O(),i=l.exports.useContext(K);i||R(!1);let{router:u}=i,f=l.exports.useContext(P);u!=null&&f!=null||R(!1);let{restoreScrollPosition:c,preventScrollReset:d}=f;l.exports.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),Y(l.exports.useCallback(()=>{if(n.state==="idle"){let a=(t?t(o,s):null)||o.key;p[a]=window.scrollY}sessionStorage.setItem(r||g,JSON.stringify(p)),window.history.scrollRestoration="auto"},[r,t,n.state,o,s])),l.exports.useLayoutEffect(()=>{try{let a=sessionStorage.getItem(r||g);a&&(p=JSON.parse(a))}catch{}},[r]),l.exports.useLayoutEffect(()=>{let a=u==null?void 0:u.enableScrollRestoration(p,()=>window.scrollY,t);return()=>a&&a()},[u,t]),l.exports.useLayoutEffect(()=>{if(c!==!1){if(typeof c=="number"){window.scrollTo(0,c);return}if(o.hash){let a=document.getElementById(o.hash.slice(1));if(a){a.scrollIntoView();return}}d!==!0&&window.scrollTo(0,0)}},[o,c,d])}function Y(e){l.exports.useEffect(()=>(window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}),[e])}export{M as H,W as L,G as S};
