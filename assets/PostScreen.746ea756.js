import{r as x}from"./react.6bac1629.js";import{L as j}from"./Layout.d1961964.js";import{a as g,u as p}from"./react-redux.49c0f1c3.js";import{C as k,k as I,l as $,m as A,b as U,v as R,w as P,E as O,J as S,x as E,D as z}from"./react-icons.ea9a12e6.js";import{F as L}from"./Footer.d0426908.js";import{k as D,m as F,n as H,o as T,q as W,r as Y}from"./index.17e6740a.js";import{h as q}from"./html-react-parser.161f3490.js";import{I as B,_ as J}from"./react-hot-toast.9c82a8f7.js";import{h as M}from"./moment.4889ea25.js";import{_ as G}from"./react-document-meta.3507bebf.js";import"./axios.58752079.js";import{j as r,a as i}from"./@rc-component.1251c77a.js";import{a as K,b as Q}from"./react-router.ddd05982.js";import"./react-dom.743d3922.js";import"./scheduler.3d82e58a.js";import"./hoist-non-react-statics.798fddd9.js";import"./react-is.484b48b3.js";import"./use-sync-external-store.b020237b.js";import"./react-router-dom.4fd390f9.js";import"./@remix-run.0f90e68c.js";import"./@reduxjs.ad644bad.js";import"./immer.a5abe755.js";import"./redux.25e2e7b8.js";import"./@babel.3a8c2b99.js";import"./redux-thunk.c6126e9b.js";import"./react-loader-spinner.370fdd40.js";import"./styled-components.636ce670.js";import"./@emotion.21aae260.js";import"./styled-tools.6bc36e93.js";import"./react-dropzone.59967111.js";import"./prop-types.c466925a.js";import"./file-selector.46695f03.js";import"./tslib.3ddc700f.js";import"./attr-accept.d4f66889.js";import"./@react-oauth.9cfe8954.js";import"./redux-persist.f9308c0e.js";import"./rc-util.48716302.js";import"./classnames.894b94fb.js";import"./rc-resize-observer.5e4ec66b.js";import"./resize-observer-polyfill.8deb1e21.js";import"./rc-motion.a469ddb1.js";import"./goober.2053c3e8.js";import"./react-property.eaac8e83.js";import"./domelementtype.4be9d55f.js";import"./html-dom-parser.b90dc621.js";import"./style-to-js.d7109a81.js";import"./style-to-object.0e87b645.js";import"./inline-style-parser.6dc90e75.js";import"./shallowequal.ea8d8004.js";function V({postId:e,userId:o,data:s}){var l;return x.exports.useState(!1),x.exports.useState(""),g(),r("div",{className:"flex flex-col gap-6 my-4 mx-4",children:(l=s==null?void 0:s.slice(0,1))==null?void 0:l.map(t=>{var c,m,h;return i("div",{className:"flex flex-col",children:[i("div",{className:"flex gap-2 items-center justify-start",children:[((c=t==null?void 0:t.user)==null?void 0:c.picture)&&r("img",{src:(m=t==null?void 0:t.user)==null?void 0:m.picture,alt:"avatar",className:"w-8 h-8 object-cover object-center rounded-full"}),r("span",{className:"mr-1 font-bold",children:(h=t==null?void 0:t.user)==null?void 0:h.given_name})]}),r("div",{className:"flex justify-between text-[14px] items-center",children:r("span",{children:t==null?void 0:t.comment})})]},`${t==null?void 0:t._id}-${t.user.given_name}`)})})}const X=({post:e})=>{var b,v,w,N,y;const[o,s]=x.exports.useState([]),{_id:l}=p(n=>n.auth),t=g(),c=e==null?void 0:e._id,m=()=>{t(F(c)),t(H(c))};x.exports.useEffect(()=>{(async()=>{try{const d=await fetch(`${T}post-comment/all-comments/${c}`);if(d.ok){const _=await d.json();s(_)}else console.error(`Error: ${d.status}`)}catch(d){console.error(d)}})()},[]),x.exports.useEffect(()=>{t(D(o==null?void 0:o.length))},[o]);const h=async()=>{if(!l)return J("Sorry you have to sign in to like post");t(W({postId:e==null?void 0:e._id,userId:l}))},u=(n,d)=>{n.preventDefault(),window.open(d,"Share","width=600,height=400")},a=window.location.href,f=e==null?void 0:e.title,C={title:e.title,description:e.post,canonical:a,meta:{charset:"utf-8",name:{keywords:"react, meta, document, html, tags"}}};return i(G,{...C,children:[r(B,{}),i("div",{className:"group flex flex-col my-4 rounded-xl bg-bg_alt",children:[i("div",{className:"",children:[i("div",{className:"flex items-center mt-2 ml-2",children:[r("p",{className:"text-[12px] flex flex-col justify-start px-2 py-1 text-lighter rounded-md bg-bg_alt items-start text-start gap-0",children:"@posted by"}),i("div",{className:"flex items-center text-base text-lighter p-1 rounded-b-md left-2 gap-2",children:[r("img",{src:(b=e==null?void 0:e.user)==null?void 0:b.picture,className:"w-[50px] h-[50px] object-cover rounded-full",alt:"logo"}),r("div",{className:"flex flex-col justify-start px-2 py-1 rounded-md bg-bg_alt items-start text-start gap-0",children:i("p",{className:"m-0 p-0 text-[14px] text-facebook",children:[(v=e==null?void 0:e.user)==null?void 0:v.given_name," ",(w=e==null?void 0:e.user)==null?void 0:w.family_name]})})]})]}),i("div",{className:"flex text-start pb-4 justify-between p-2 px-4 text-base",children:[r("p",{className:"text-[16px]",children:e==null?void 0:e.title}),r("p",{className:"text-[12px] text-lighter",children:M(e==null?void 0:e.createdAt).fromNow()})]})]}),i("div",{onClick:m,className:"relative flex flex-col items-center text-center w-[340px] md:w-[700px] rounded-xl cursor-pointer duration-300",children:[r("div",{className:"absolute top-0 right-1 flex  gap-2 justify-between items-center text-center text-base text-bg_cl py-4",children:i("div",{className:"flex gap-1 text-center items-center justify-center",children:[r("div",{className:"flex",children:r(k,{size:22,className:"text-primary"})}),e==null?void 0:e.viewCount]})}),i("div",{className:"w-full",children:[(e==null?void 0:e.image)&&r("img",{src:e==null?void 0:e.image,alt:e==null?void 0:e.name,className:"h-[200px] w-[380px] md:w-full md:h-[400px] object-cover object-center transition-all ease self-center"}),i("div",{className:"",children:[(e==null?void 0:e.post)&&r("div",{className:"flex text-start pb--4 justify-between p-2 px-4 text-base border-b border-b-primary",children:r("p",{className:"text-[16px]",children:q(`${e==null?void 0:e.post.slice(0,200)}`)})}),r(V,{postId:e==null?void 0:e._id,userId:l,data:o})]})]})]}),i("div",{className:"flex items-center ml-2 pb-3 justify-between",children:[r("div",{className:"flex items-center text-base text-white p-1 rounded-b-md left-2 gap-2",children:i("div",{className:"flex gap-4",children:[i("div",{onClick:h,className:`${(N=e==null?void 0:e.lovedUsers)!=null&&N.find(n=>n._id===l)?"text-red":""} flex text-[12px] gap-2 items-center hover:text-red duration-300 cursor-pointer`,children:[e==null?void 0:e.loveCount,(y=e==null?void 0:e.lovedUsers)!=null&&y.find(n=>n._id===l)?r("div",{className:"cursor-pointer border border-red rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(I,{size:18})}):r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r($,{size:18})})]}),i("div",{className:"flex text-[12px] gap-2 items-center",children:[e==null?void 0:e.viewCount,r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(A,{size:18})})]}),i("div",{className:"flex text-[12px] gap-2 items-center",children:[e==null?void 0:e.commentCount,r("div",{className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(U,{size:18})})]})]})}),r("div",{className:"text-[12px] flex flex-col justify-start px-2 py-1 text-lighter rounded-md items-start text-start gap-0",children:r("div",{className:"flex flex-col gap-4",children:i("div",{className:"flex gap-4 social-media text-[18px] px-2 text-lighter items-center justify-items-center",children:[r("a",{href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`,onClick:n=>u(n,`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`),target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(R,{})}),r("a",{href:`whatsapp://send?text=${encodeURIComponent(f)}%20${encodeURIComponent(a)}`,"data-action":"share/whatsapp/share",className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(P,{})}),r("a",{href:`instagram://library?AssetPath=${encodeURIComponent(a)}&Caption=${encodeURIComponent(f)}`,"data-action":"share/instagram/share",className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(O,{})}),r("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`,onClick:n=>u(n,`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`),target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(S,{})}),r("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(f)}`,onClick:n=>u(n,`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(f)}`),target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer border border-lighter text-lighter rounded-full p-2 hover:bg-green duration-300 hover:text-white",children:r(E,{})})]})})})]})]})]})},Ge=()=>{const{given_name:e,family_name:o,email:s,isAdmin:l}=p(a=>a.auth),{posts:t}=p(a=>a.posts),c=K(),m=g(),h=Q(),{pathname:u}=h;return x.exports.useEffect(()=>{m(Y())},[u,t]),i(j,{children:[s&&l&&i("div",{className:"flex flex-col sm:flex-row items-center justify-between md:w-[1000px] my-8 pr-8",children:[r("h3",{className:"text-center font-bold text-3xl pb-4",children:"Posts"}),i("div",{className:"flex items-center px-2 w-full justify-around",children:[i("p",{className:"text-center text-lighter text-md",children:[e," ",o,", Bring Your Ideas to Life - Write Your Next Post Today!"]}),r("div",{onClick:()=>c("/create-post"),className:"bg-bg_light p-2 rounded-xl h-min w-min cursor-pointer",children:r(z,{size:20})})]})]}),r("div",{className:"flex flex-col flex-wrap text-center justify-center items-center gap-10 w-full mt-5",children:(t==null?void 0:t.length)>0?t==null?void 0:t.map(a=>r(X,{post:a},a._id)):r("p",{className:"text-base w-full",children:"No Posts..."})}),r("div",{className:"mb-12 md:mb-20",children:r(L,{})})]})};export{Ge as default};
