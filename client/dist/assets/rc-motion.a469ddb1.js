import{h as ce,k as _e,l as Me,a as be,_ as Oe,d as pe,c as N,e as l,b as g,m as ge,g as Be}from"./@babel.3a8c2b99.js";import{c as Je}from"./classnames.894b94fb.js";import{c as me,j as Te,F as te,l as Xe,s as Ye,G as Ze}from"./rc-util.48716302.js";import{r as s}from"./react.6bac1629.js";var et=["children"],De=s.exports.createContext({});function kt(t){var e=t.children,n=ce(t,et);return s.exports.createElement(De.Provider,{value:n},e)}var tt=function(t){_e(n,t);var e=Me(n);function n(){return be(this,n),e.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(s.exports.Component),I="none",X="appear",Y="enter",Z="leave",ke="none",L="prepare",$="start",W="active",Ee="end",Ne="prepared";function Ce(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function nt(t,e){var n={animationend:Ce("Animation","AnimationEnd"),transitionend:Ce("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var rt=nt(me(),typeof window!="undefined"?window:{}),Ue={};if(me()){var at=document.createElement("div");Ue=at.style}var ee={};function Ve(t){if(ee[t])return ee[t];var e=rt[t];if(e)for(var n=Object.keys(e),r=n.length,o=0;o<r;o+=1){var u=n[o];if(Object.prototype.hasOwnProperty.call(e,u)&&u in Ue)return ee[t]=e[u],ee[t]}return""}var we=Ve("animationend"),Fe=Ve("transitionend"),Ie=!!(we&&Fe),Re=we||"animationend",Le=Fe||"transitionend";function Pe(t,e){if(!t)return null;if(pe(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var ot=function(t){var e=s.exports.useRef(),n=s.exports.useRef(t);n.current=t;var r=s.exports.useCallback(function(a){n.current(a)},[]);function o(a){a&&(a.removeEventListener(Le,r),a.removeEventListener(Re,r))}function u(a){e.current&&e.current!==a&&o(e.current),a&&a!==e.current&&(a.addEventListener(Le,r),a.addEventListener(Re,r),e.current=a)}return s.exports.useEffect(function(){return function(){o(e.current)}},[]),[u,o]},je=me()?s.exports.useLayoutEffect:s.exports.useEffect,it=function(){var t=s.exports.useRef(null);function e(){Te.cancel(t.current)}function n(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var u=Te(function(){o<=1?r({isCanceled:function(){return u!==t.current}}):n(r,o-1)});t.current=u}return s.exports.useEffect(function(){return function(){e()}},[]),[n,e]},st=[L,$,W,Ee],ut=[L,Ne],Ke=!1,ct=!0;function Qe(t){return t===W||t===Ee}var vt=function(t,e,n){var r=te(ke),o=N(r,2),u=o[0],a=o[1],p=it(),E=N(p,2),i=E[0],c=E[1];function v(){a(L,!0)}var f=e?ut:st;return je(function(){if(u!==ke&&u!==Ee){var d=f.indexOf(u),S=f[d+1],k=n(u);k===Ke?a(S,!0):S&&i(function(P){function T(){P.isCanceled()||a(S,!0)}k===!0?T():Promise.resolve(k).then(T)})}},[t,u]),s.exports.useEffect(function(){return function(){c()}},[]),[v,u]};function ft(t,e,n,r){var o=r.motionEnter,u=o===void 0?!0:o,a=r.motionAppear,p=a===void 0?!0:a,E=r.motionLeave,i=E===void 0?!0:E,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,d=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,P=r.onEnterStart,T=r.onLeaveStart,D=r.onAppearActive,b=r.onEnterActive,z=r.onLeaveActive,j=r.onAppearEnd,C=r.onEnterEnd,O=r.onLeaveEnd,U=r.onVisibleChanged,ne=te(),K=N(ne,2),R=K[0],V=K[1],h=te(I),w=N(h,2),m=w[0],_=w[1],q=te(null),B=N(q,2),re=B[0],Q=B[1],ae=s.exports.useRef(!1),oe=s.exports.useRef(null);function J(){return n()}var Se=s.exports.useRef(!1);function ye(){_(I,!0),Q(null,!0)}function xe(A){var y=J();if(!(A&&!A.deadline&&A.target!==y)){var x=Se.current,M;m===X&&x?M=j==null?void 0:j(y,A):m===Y&&x?M=C==null?void 0:C(y,A):m===Z&&x&&(M=O==null?void 0:O(y,A)),m!==I&&x&&M!==!1&&ye()}}var $e=ot(xe),We=N($e,1),ze=We[0],he=function(y){var x,M,G;switch(y){case X:return x={},g(x,L,f),g(x,$,k),g(x,W,D),x;case Y:return M={},g(M,L,d),g(M,$,P),g(M,W,b),M;case Z:return G={},g(G,L,S),g(G,$,T),g(G,W,z),G;default:return{}}},H=s.exports.useMemo(function(){return he(m)},[m]),He=vt(m,!t,function(A){if(A===L){var y=H[L];return y?y(J()):Ke}if(F in H){var x;Q(((x=H[F])===null||x===void 0?void 0:x.call(H,J(),null))||null)}return F===W&&(ze(J()),c>0&&(clearTimeout(oe.current),oe.current=setTimeout(function(){xe({deadline:!0})},c))),F===Ne&&ye(),ct}),Ae=N(He,2),Ge=Ae[0],F=Ae[1],qe=Qe(F);Se.current=qe,je(function(){V(e);var A=ae.current;ae.current=!0;var y;!A&&e&&p&&(y=X),A&&e&&u&&(y=Y),(A&&!e&&i||!A&&v&&!e&&i)&&(y=Z);var x=he(y);y&&(t||x[L])?(_(y),Ge()):_(I)},[e]),s.exports.useEffect(function(){(m===X&&!p||m===Y&&!u||m===Z&&!i)&&_(I)},[p,u,i]),s.exports.useEffect(function(){return function(){ae.current=!1,clearTimeout(oe.current)}},[]);var ie=s.exports.useRef(!1);s.exports.useEffect(function(){R&&(ie.current=!0),R!==void 0&&m===I&&((ie.current||R)&&(U==null||U(R)),ie.current=!0)},[R,m]);var se=re;return H[L]&&F===$&&(se=l({transition:"none"},se)),[m,F,se,R!=null?R:e]}function lt(t){var e=t;pe(t)==="object"&&(e=t.transitionSupport);function n(o,u){return!!(o.motionName&&e&&u!==!1)}var r=s.exports.forwardRef(function(o,u){var a=o.visible,p=a===void 0?!0:a,E=o.removeOnLeave,i=E===void 0?!0:E,c=o.forceRender,v=o.children,f=o.motionName,d=o.leavedClassName,S=o.eventProps,k=s.exports.useContext(De),P=k.motion,T=n(o,P),D=s.exports.useRef(),b=s.exports.useRef();function z(){try{return D.current instanceof HTMLElement?D.current:Ze(b.current)}catch{return null}}var j=ft(T,p,z,o),C=N(j,4),O=C[0],U=C[1],ne=C[2],K=C[3],R=s.exports.useRef(K);K&&(R.current=!0);var V=s.exports.useCallback(function(Q){D.current=Q,Xe(u,Q)},[u]),h,w=l(l({},S),{},{visible:p});if(!v)h=null;else if(O===I)K?h=v(l({},w),V):!i&&R.current&&d?h=v(l(l({},w),{},{className:d}),V):c||!i&&!d?h=v(l(l({},w),{},{style:{display:"none"}}),V):h=null;else{var m,_;U===L?_="prepare":Qe(U)?_="active":U===$&&(_="start");var q=Pe(f,"".concat(O,"-").concat(_));h=v(l(l({},w),{},{className:Je(Pe(f,O),(m={},g(m,q,q&&_),g(m,f,typeof f=="string"),m)),style:ne}),V)}if(s.exports.isValidElement(h)&&Ye(h)){var B=h,re=B.ref;re||(h=s.exports.cloneElement(h,{ref:V}))}return s.exports.createElement(tt,{ref:b},h)});return r.displayName="CSSMotion",r}var dt=lt(Ie),ve="add",fe="keep",le="remove",ue="removed";function pt(t){var e;return t&&pe(t)==="object"&&"key"in t?e=t:e={key:t},l(l({},e),{},{key:String(e.key)})}function de(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(pt)}function mt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,o=e.length,u=de(t),a=de(e);u.forEach(function(i){for(var c=!1,v=r;v<o;v+=1){var f=a[v];if(f.key===i.key){r<v&&(n=n.concat(a.slice(r,v).map(function(d){return l(l({},d),{},{status:ve})})),r=v),n.push(l(l({},f),{},{status:fe})),r+=1,c=!0;break}}c||n.push(l(l({},i),{},{status:le}))}),r<o&&(n=n.concat(a.slice(r).map(function(i){return l(l({},i),{},{status:ve})})));var p={};n.forEach(function(i){var c=i.key;p[c]=(p[c]||0)+1});var E=Object.keys(p).filter(function(i){return p[i]>1});return E.forEach(function(i){n=n.filter(function(c){var v=c.key,f=c.status;return v!==i||f!==le}),n.forEach(function(c){c.key===i&&(c.status=fe)})}),n}var Et=["component","children","onVisibleChanged","onAllRemoved"],St=["status"],yt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function xt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,n=function(r){_e(u,r);var o=Me(u);function u(){var a;be(this,u);for(var p=arguments.length,E=new Array(p),i=0;i<p;i++)E[i]=arguments[i];return a=o.call.apply(o,[this].concat(E)),g(ge(a),"state",{keyEntities:[]}),g(ge(a),"removeKey",function(c){var v=a.state.keyEntities,f=v.map(function(d){return d.key!==c?d:l(l({},d),{},{status:ue})});return a.setState({keyEntities:f}),f.filter(function(d){var S=d.status;return S!==ue}).length}),a}return Oe(u,[{key:"render",value:function(){var p=this,E=this.state.keyEntities,i=this.props,c=i.component,v=i.children,f=i.onVisibleChanged,d=i.onAllRemoved,S=ce(i,Et),k=c||s.exports.Fragment,P={};return yt.forEach(function(T){P[T]=S[T],delete S[T]}),delete S.keys,s.exports.createElement(k,S,E.map(function(T){var D=T.status,b=ce(T,St),z=D===ve||D===fe;return s.exports.createElement(e,Be({},P,{key:b.key,visible:z,eventProps:b,onVisibleChanged:function(C){if(f==null||f(C,{key:b.key}),!C){var O=p.removeKey(b.key);O===0&&d&&d()}}}),v)}))}}],[{key:"getDerivedStateFromProps",value:function(p,E){var i=p.keys,c=E.keyEntities,v=de(i),f=mt(c,v);return{keyEntities:f.filter(function(d){var S=c.find(function(k){var P=k.key;return d.key===P});return!(S&&S.status===ue&&d.status===le)})}}}]),u}(s.exports.Component);return g(n,"defaultProps",{component:"div"}),n}xt(Ie);export{dt as C,kt as M};
